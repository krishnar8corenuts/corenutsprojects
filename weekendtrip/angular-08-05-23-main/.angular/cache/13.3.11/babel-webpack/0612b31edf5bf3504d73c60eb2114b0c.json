{"ast":null,"code":"import { animate, state, style, transition, trigger } from '@angular/animations';\nimport { saveAs } from 'file-saver';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../model/weekend.repository\";\nimport * as i2 from \"./../model/weekend.restdata\";\nimport * as i3 from \"@angular/common\";\n\nfunction TravellorDetailsComponent_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 5)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵelement(9, \"i\", 6);\n    i0.ɵɵelementStart(10, \"i\", 4);\n    i0.ɵɵlistener(\"click\", function TravellorDetailsComponent_tr_11_Template_i_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const data_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.getPdf(data_r1.travellerId);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const data_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r1.travellerEmail);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r1.packageName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 3, data_r1.purchaseDate));\n  }\n}\n\nexport let TravellorDetailsComponent = /*#__PURE__*/(() => {\n  class TravellorDetailsComponent {\n    constructor(repo, source) {\n      this.repo = repo;\n      this.source = source;\n      this.pass = [];\n      this.showpassengers = false;\n      this.displayedColumns = ['travellerId', 'travellerEmail', 'packageName', 'journeyStartingDate', 'passengers']; // this.expandedElement=null\n\n      this.traveller = this.repo.getTravellers();\n      console.log(this.repo.travellers);\n    }\n\n    proceed(id) {\n      //  this.pass=this.traveller[id].passengers\n      console.log(id); // console.log(this.traveller[0].passengers.passengerId);\n\n      this.showpassengers = true;\n    }\n\n    getPdf(id) {\n      this.source.getPdf(id).subscribe(res => {\n        console.log(res); // window.open(window.URL.createObjectURL(new Blob([res], { type: \"application/octet-stream\",endings:\"transparent\" } )));\n\n        saveAs(res, \"weekendtrips\" + id + \".pdf\"); //  let fileName=response.headers.get('content-disposition')?.split(';')[1].split('=')[1];\n        //  let blob:Blob=response.body as Blob;\n        //  let a =document.createElement('a');\n        //  a.download=fileName;\n        //  a.href=window.URL.createObjectURL(blob);\n        //  a.click();\n      }); // this.repo.getpdf(id);\n    }\n\n    getfullPdf() {\n      this.source.getfullPdf().subscribe(res => {\n        saveAs(res, \"weekendtripsAdmin.pdf\");\n      });\n    }\n\n  }\n\n  TravellorDetailsComponent.ɵfac = function TravellorDetailsComponent_Factory(t) {\n    return new (t || TravellorDetailsComponent)(i0.ɵɵdirectiveInject(i1.WeekendRepository), i0.ɵɵdirectiveInject(i2.WeekendRestData));\n  };\n\n  TravellorDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TravellorDetailsComponent,\n    selectors: [[\"travellor-details\"]],\n    decls: 15,\n    vars: 3,\n    consts: [[1, \"mat-elevation-z8\", 2, \"width\", \"90%\", \"margin-left\", \"30px\", \"margin-top\", \"10px\", \"padding\", \"10px\", \"font-size\", \"20px\", 3, \"cellPadding\", \"cellSpacing\"], [1, \"thead-dark\", 2, \"margin-top\", \"200px\"], [\"scope\", \"col\"], [\"style\", \"padding: 10px;\", 4, \"ngFor\", \"ngForOf\"], [1, \"fa-solid\", \"fa-file-pdf\", 2, \"color\", \"#cf2a2a\", 3, \"click\"], [2, \"padding\", \"10px\"], [1, \"fa-solid\", \"fa-person\", 2, \"margin-right\", \"20px\"]],\n    template: function TravellorDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"table\", 0)(1, \"thead\", 1)(2, \"tr\")(3, \"th\", 2);\n        i0.ɵɵtext(4, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"th\", 2);\n        i0.ɵɵtext(6, \" Package\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 2);\n        i0.ɵɵtext(8, \"Purchase Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"th\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"tbody\");\n        i0.ɵɵtemplate(11, TravellorDetailsComponent_tr_11_Template, 11, 5, \"tr\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"h3\");\n        i0.ɵɵtext(13, \" Download all the records: \");\n        i0.ɵɵelementStart(14, \"i\", 4);\n        i0.ɵɵlistener(\"click\", function TravellorDetailsComponent_Template_i_click_14_listener() {\n          return ctx.getfullPdf();\n        });\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"cellPadding\", 10)(\"cellSpacing\", 9);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.traveller);\n      }\n    },\n    directives: [i3.NgForOf],\n    pipes: [i3.DatePipe],\n    encapsulation: 2,\n    data: {\n      animation: [trigger('detailExpand', [state('collapsed', style({\n        height: '0px',\n        minHeight: '0'\n      })), state('expanded', style({\n        height: '*'\n      })), transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)'))])]\n    }\n  });\n  return TravellorDetailsComponent;\n})();\n;","map":null,"metadata":{},"sourceType":"module"}